<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CVyuk! â€“ Convert Ewallet</title>

<style>
:root{
  --bg:#f4f6fb;
  --card:#ffffff;
  --primary:#6c7cff;
  --text:#2b2b2b;
  --muted:#8a8fa3;
}
*{box-sizing:border-box;font-family:Segoe UI,Arial,sans-serif}
body{margin:0;background:var(--bg);color:var(--text)}
header{
  padding:18px 24px;
  font-size:22px;
  font-weight:700;
  color:#fff;
  background:var(--primary);
}
header button{
  float:right;
  background:#fff;
  color:var(--primary);
  border:none;
  border-radius:8px;
  padding:6px 12px;
  cursor:pointer;
}
main{max-width:1100px;margin:auto;padding:24px}
.card{
  background:var(--card);
  border-radius:16px;
  padding:24px;
  margin-bottom:24px;
  box-shadow:0 10px 25px rgba(0,0,0,.05);
}
h2{margin-top:0;font-size:18px}
.ewallets{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(120px,1fr));
  gap:16px;
}
.ewallet{
  border:1px solid #eee;
  border-radius:12px;
  padding:16px;
  text-align:center;
  cursor:pointer;
  transition:.2s;
}
.ewallet:hover{border-color:var(--primary)}
.ewallet img{width:48px;height:48px;object-fit:contain}
form{display:none;margin-top:24px}
form.active{display:block}
label{font-size:13px;color:var(--muted)}
input,select{
  width:100%;
  padding:10px 12px;
  border-radius:10px;
  border:1px solid #ddd;
  margin-bottom:12px;
}
button.submit{
  background:var(--primary);
  color:#fff;
  border:none;
  padding:12px 20px;
  border-radius:12px;
  cursor:pointer;
}
.qris{text-align:center;margin:20px 0}
.qris img{width:220px;border-radius:12px;border:1px dashed #ccc}

table{width:100%;border-collapse:collapse;font-size:14px}
th,td{padding:10px;border-bottom:1px solid #eee;text-align:left}
th{color:var(--muted)}

#adminLogin,#adminPanel{display:none}
.status{padding:4px 8px;border-radius:6px}
</style>
</head>

<body>

<header>
  CVyuk!
  <button onclick="openAdmin()">Admin</button>
</header>

<main>

<!-- LOGIN ADMIN -->
<div class="card" id="adminLogin">
  <h2>Login Admin</h2>
  <label>PIN Admin</label>
  <input type="password" id="adminPin" placeholder="Masukkan PIN">
  <button class="submit" onclick="loginAdmin()">Login</button>
  <p id="adminError" style="color:red;display:none">PIN salah</p>
</div>

<!-- PILIH EWALLET -->
<div class="card">
  <h2>Pilih E-Wallet</h2>
  <div class="ewallets">
    <div class="ewallet" onclick="selectWallet('DANA')">
      <img src="https://upload.wikimedia.org/wikipedia/commons/7/72/Logo_dana_blue.svg"><div>DANA</div>
    </div>
    <div class="ewallet" onclick="selectWallet('OVO')">
      <img src="https://upload.wikimedia.org/wikipedia/commons/e/eb/Logo_ovo_purple.svg"><div>OVO</div>
    </div>
    <div class="ewallet" onclick="selectWallet('GoPay')">
      <img src="https://upload.wikimedia.org/wikipedia/commons/8/86/Gopay_logo.svg"><div>GoPay</div>
    </div>
    <div class="ewallet" onclick="selectWallet('ShopeePay')">
      <img src="https://upload.wikimedia.org/wikipedia/commons/f/fe/ShopeePay_logo.svg"><div>ShopeePay</div>
    </div>
  </div>

  <!-- FORM -->
  <form id="form" onsubmit="sendWA(event)">
    <h2 id="walletTitle"></h2>

    <div class="qris">
      <p>Scan QRIS:</p>
      <img src="qris-anda.png">
    </div>

    <label>Nama Pengirim</label>
    <input required>

    <label>Nomor Ewallet Pengirim</label>
    <input required>

    <label>Nama Penerima</label>
    <input required>

    <label>Nomor Ewallet / Bank Penerima</label>
    <input required>

    <button class="submit" type="submit">Kirim Transaksi</button>
  </form>
</div>

<!-- PANEL ADMIN -->
<div class="card" id="adminPanel">
  <h2>Histori Transaksi</h2>
  <table>
    <thead>
      <tr>
        <th>Tanggal</th>
        <th>Ewallet</th>
        <th>Pengirim</th>
        <th>Penerima</th>
        <th>Status</th>
      </tr>
    </thead>
    <tbody id="history"></tbody>
  </table>
</div>

</main>

<script>
const ADMIN_PIN = "Rapli0909";
const ADMIN_WA = "6282178214040";
let selectedWallet = "";
const form = document.getElementById("form");
const historyEl = document.getElementById("history");

function selectWallet(w){
  selectedWallet = w;
  document.getElementById("walletTitle").innerText = "Convert " + w;
  form.classList.add("active");
}

function sendWA(e){
  e.preventDefault();
  const i = form.querySelectorAll("input");
  const data = {
    tanggal:new Date().toLocaleString(),
    wallet:selectedWallet,
    pengirim:i[0].value,
    noPengirim:i[1].value,
    penerima:i[2].value,
    noPenerima:i[3].value,
    status:"Pending"
  };

  const h = JSON.parse(localStorage.getItem("cvyuk")||"[]");
  h.unshift(data);
  localStorage.setItem("cvyuk",JSON.stringify(h));
  renderHistory();

  const msg =
`Halo Admin CVyuk!

Ewallet: ${data.wallet}
Pengirim: ${data.pengirim}
No Pengirim: ${data.noPengirim}
Penerima: ${data.penerima}
No Tujuan: ${data.noPenerima}

Bukti transaksi akan saya kirim.`;

  window.open(`https://wa.me/${ADMIN_WA}?text=${encodeURIComponent(msg)}`);
  form.reset();
}

function renderHistory(){
  const h = JSON.parse(localStorage.getItem("cvyuk")||"[]");
  historyEl.innerHTML = h.length ? h.map((x,i)=>`
    <tr>
      <td>${x.tanggal}</td>
      <td>${x.wallet}</td>
      <td>${x.pengirim}</td>
      <td>${x.penerima}</td>
      <td>
        <select onchange="updateStatus(${i},this.value)">
          <option ${x.status=="Pending"?"selected":""}>Pending</option>
          <option ${x.status=="Sukses"?"selected":""}>Sukses</option>
        </select>
      </td>
    </tr>`).join("") :
    "<tr><td colspan='5'>Belum ada transaksi</td></tr>";
}

function updateStatus(i,s){
  const h = JSON.parse(localStorage.getItem("cvyuk")||"[]");
  h[i].status = s;
  localStorage.setItem("cvyuk",JSON.stringify(h));
}

function openAdmin(){
  document.getElementById("adminLogin").style.display="block";
  window.scrollTo(0,0);
}

function loginAdmin(){
  if(document.getElementById("adminPin").value===ADMIN_PIN){
    document.getElementById("adminLogin").style.display="none";
    document.getElementById("adminPanel").style.display="block";
    renderHistory();
  }else{
    document.getElementById("adminError").style.display="block";
  }
}
</script>

</body>
</html>
